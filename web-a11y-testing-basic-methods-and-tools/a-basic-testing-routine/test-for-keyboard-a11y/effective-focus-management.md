# Effective Focus Management (Form Validation, Dialogs, AJAX, Etc.)

## Overview

When dynamic content is generated based on a user's input, it increases the challenge of making sure the keyboard focus is moved and visible to keyboard users throughout the entire interaction. If a user triggers an element that generates new content on the web page, the keyboard focus should be shifted to the new content.

If a user removes content from the web page, then the keyboard focus should be shifted to the next logical place on the web page or to the element that triggered the change, depending on the type and nature of the content.

The idea is that keyboard focus must be returned to where users can continue from where they left off on the web page after generating or removing the content. It must not get lost or moved to the top of the web page where users may have to start browsing the page all over again.

## Testing Methodology for Focus Management

When testing for focus management, find instances of dynamic content on the web page that is generated or removed based on interaction. Use the keyboard to test for focus management.

If the content generated by the user is a modal dialog:

- Ensure the keyboard focus is sent to the dialog when it is opened. For short dialogs, the focus can be sent to a default button in the dialog. For larger dialogs, the focus can be sent to the first heading in the dialog.
- Make sure the focus stays within the dialog. You must not be able to tab or navigate anywhere outside of the dialog.
- When the dialog is closed, either through a button or the Esc key, check that the focus returns to the element that triggered the dialog. It must not reset to the top of the page or disappear altogether.

If the content generated by the user occurs in the page itself (form validation success/error messages, AJAX):

- Make sure the focus moves to the new content on the web page so users can find the content.
- If the content can be closed by the user, then focus must be shifted either back to where the user was previously on the web page or where the next logical interaction takes place. For instance, with a form error message, focus may be moved to the first input that contains an error.

### Note:

Moving the focus is one way to make screen readers announce content. However, there must be text that is programmatically determinable in order for the screen reader to render content when the focus is moved.

Whenever focus is moved, it is important to make sure either real text or programmatically-associated text (e.g., through aria-describedby) is present. Use a screen reader in addition to the keyboard to check and see if it reads new content when the focus is moved.
